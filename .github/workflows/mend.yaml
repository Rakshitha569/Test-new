name: Mend security Scan

on:
 workflow_dispatch:

jobs:
  mend_security_scan:
    runs-on: [ small ]

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
       
      - name: Install Python 3
        uses: actions/setup-python@v2
        with:
          python-version:  '3.9'
        
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
     
      - name: Run Mend CLI Scan
        env:
            MEND_EMAIL: ${{secrets.MEND_EMAIL}}
            MEND_USER_KEY: ${{secrets.MEND_USER_KEY}}
            MEND_URL: https://saas-eu.mend.io/
        run: |
           curl https://downloads.mend.io/cli/linux_amd64/mend -o /usr/local/bin/mend && chmod +x /usr/local/bin/mend
           mend dep -u -e -s "Githubaction-python-template"
           mend code --snippet-size 10 -u -s "Githubaction-python-template"
     
           
  
